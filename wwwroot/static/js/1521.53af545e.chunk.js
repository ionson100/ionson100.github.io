"use strict";(self.webpackChunkionson100_github_io=self.webpackChunkionson100_github_io||[]).push([[1521],{31521:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var i=n(65043),o=n(41952),r=(n(9352),n(61225)),s=n(70579);function d(t){return(0,s.jsxs)("div",{style:{width:200,cursor:"pointer"},children:[(0,s.jsxs)("div",{children:[t,":1"]}),(0,s.jsxs)("div",{children:[t,":2"]}),(0,s.jsxs)("div",{children:[t,":3"]}),(0,s.jsxs)("div",{children:[t,":4"]})]})}class u extends i.Component{constructor(t){super(t),this.mRefMenu1=i.createRef(),this.mRefMenu2=i.createRef(),this.menu1=void 0,this.menu2=void 0}componentDidMount(){this.menu1=new o.t({target:this.mRefMenu1.current,body:d("Menu1")}),this.menu2=new o.t({target:this.mRefMenu2.current,body:d("Menu2")})}componentWillUnmount(){var t,e;null===(t=this.menu1)||void 0===t||t.ContextMenuWillUnmount(),null===(e=this.menu2)||void 0===e||e.ContextMenuWillUnmount()}render(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)("div",{ref:this.mRefMenu1,style:{width:100,height:100,background:"#9cee98",margin:10}}),(0,s.jsx)("div",{ref:this.mRefMenu2,style:{width:100,height:100,background:"#8994f2",margin:10}})]}),(0,s.jsx)(r.MM,{code:'import React from "react";\nimport {ContextMenu} from "bsr-context-menu";\nimport \'bsr-context-menu/dist/index.css\'\n\nfunction Body(text:string){\n    return(\n        <div style={{width:200,cursor:"pointer"}}>\n            <div>{text}:1</div>\n            <div>{text}:2</div>\n            <div>{text}:3</div>\n            <div>{text}:4</div>\n        </div>\n    )\n}\nexport default class P10_3 extends React.Component<any, any>{\n    private mRefMenu1=React.createRef<HTMLDivElement>()\n    private mRefMenu2=React.createRef<HTMLDivElement>()\n    private menu1?:ContextMenu\n    private menu2?:ContextMenu\n    constructor(props:Readonly<any>) {\n        super(props);\n    }\n    componentDidMount() {\n        this.menu1=new ContextMenu({target:this.mRefMenu1.current!,body:Body("Menu1")})\n        this.menu2=new ContextMenu({target:this.mRefMenu2.current!,body:Body("Menu2")})\n    }\n    componentWillUnmount() {\n        this.menu1?.ContextMenuWillUnmount()\n        this.menu2?.ContextMenuWillUnmount()\n    }\n    render() {\n        return (\n            <>\n                <div style={{display: "flex"}}>\n                    <div ref={this.mRefMenu1} style={{width: 100, height: 100, background: "#9cee98", margin: 10}}/>\n                    <div ref={this.mRefMenu2} style={{width: 100, height: 100, background: "#8994f2", margin: 10}}/>\n                </div>\n            </>\n        );\n    }\n}'})]})}}},41952:(t,e,n)=>{n.d(e,{E:()=>f,t:()=>v});var i,o=n(65043),r=n(84391),s=new Uint8Array(16);function d(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!function(t){return"string"===typeof t&&u.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n}function a(t,e,n){var i=(t=t||{}).random||(t.rng||d)();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,h(i)}var m=new Map,v=function(){function t(t){var e=this;this.contextAction=function(t){t.preventDefault(),e.div.style.visibility="hidden",m.forEach((function(t){t.click()})),e.innerRoot.render(e.props.body),setTimeout((function(){var n=e.getHeight(),i=e.getWidth(),o=e.div.offsetHeight,r=e.div.offsetWidth,s=t.pageY,d=t.pageX;n-s<o+50?(e.div.style.top=s-o+"px",e.div.style.left=i-d<r+50?d-r+"px":d+"px"):(e.div.style.top=s+"px",e.div.style.left=i-d<r+50?d-r+"px":d+"px"),e.div.style.visibility="visible"}),50)},this.click=this.click.bind(this),this.props=t,this.div=document.createElement("div"),this.div.className="bsr-context-menu",this.div.style.visibility="hidden",this.innerRoot=(0,r.createRoot)(this.div),document.body.appendChild(this.div),this.id=a(),this.div.onclick=function(){e.click()},this.ContextMenuDidMount()}return t.prototype.click=function(){this.innerRoot.render(null),this.div.style.visibility="hidden"},t.prototype.getHeight=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},t.prototype.getWidth=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth)},t.prototype.ContextMenuDidMount=function(){var t;window.addEventListener("click",this.click),null===(t=this.props.target)||void 0===t||t.addEventListener("contextmenu",this.contextAction),m.set(this.id,this)},t.prototype.ContextMenuWillUnmount=function(){var t,e=this;window.removeEventListener("click",this.click),null===(t=this.props.target)||void 0===t||t.removeEventListener("contextmenu",this.contextAction),m.delete(this.id),setTimeout((function(){e.innerRoot.unmount(),document.body.removeChild(e.div),e.props.target=void 0}))},t}(),f=function(t,e){(0,o.useEffect)((function(){var n;return(null===t||void 0===t?void 0:t.current)&&(n=new v({target:t.current,body:e})),function(){null===n||void 0===n||n.ContextMenuWillUnmount()}}),[e,t])}},9352:()=>{}}]);
//# sourceMappingURL=1521.53af545e.chunk.js.map