"use strict";(self.webpackChunkionson100_github_io=self.webpackChunkionson100_github_io||[]).push([[5612],{85612:(e,s,n)=>{n.r(s),n.d(s,{default:()=>t});var r=n(61225),a=(n(65043),n(70579));function t(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:" head part: "}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'using Newtonsoft.Json;\nusing ORM_1_21_;\n\n[MapTable("m_t_123")]\nclass MyClass\n{\n    [MapPrimaryKey("id", Generator.Native)]\n    public long Id { get; set; };\n\n    [MapColumn("name")] public string? Name { get; set; }\n\n    [MapColumn("age")] [MapIndex] public int Age { get; set; }\n\n    [MapColumnType("text")]\n    [MapColumn("des")]\n    public string? Description { get; set; }\n\n    [MapColumn("date")] public DateTime DateTime { get; set; } = DateTime.UtcNow;\n}\n\nvoid WriteLineClass(object a)\n{\n    Console.WriteLine(JsonConvert.SerializeObject(a));\n}\n\nusing var session = Configure.Session;\nsession.DropTableIfExists<MyClass>();\n\nsession.TableCreate<MyClass>();\n List<MyClass> classes = new List<MyClass>\n {\n     new() { Name = "NAME1",DateTime  = DateTime.Now,Age = 10},\n     new() { Name = "NAME2",DateTime  = DateTime.Now,Age = 20}\n };\nsession.InsertBulk(classes);\n                '})}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Where"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nsession.Query<MyClass>().Where(a=>a.DateTime.Day==DateTime.Now.Day).ToList().\n    ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE (extract( day from "m_t_123"."date") = extract( day from @p1)); params:  @p1=6/26/2024 12:53:54 PM \n\nsession.Query<MyClass>().Where(a=>a.Name.EndsWith("2")&&a.Age==20).\n    Where(s=>s.Age!=10).ToList().ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE (("m_t_123"."name" LIKE CONCAT(\'%\',@p1)) and ("m_t_123"."age" = 20)) and ("m_t_123"."age\n\nsession.Query<MyClass>().WhereIn(a => a.Age, 10, 20).ForEach(WriteLineClass)\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE ("m_t_123"."age" IN (10, 20));\n\nsession.Query<MyClass>().WhereNotIn(a=>a.Age,20).ToList().ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE ("m_t_123"."age" NOT IN (20));\n\nsession.Query<MyClass>().WhereSql(a=>$"{a.Age} = 20").ToList().ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE "m_t_123"."age" = 20;\n\nsession.Query<MyClass>().WhereSql(a=>$"{a.Age} = @1",new SqlParam("@1",20)).ToList().ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE "m_t_123"."age" = @1; params:  @1=20\n                  '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"WhereSql"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().WhereSql(a => $"{a.Age}= @1", new SqlParam("@1", 10)).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE "m_t_123"."age"= @1; params:  @1=10 \n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Any"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res=session.Query<MyClass>().Any();\nConsole.WriteLine(res);\n//ORM: SELECT EXISTS ( SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123" )\n\nvar res=session.Query<MyClass>().Any(a=>a.Age<30);\nConsole.WriteLine(res);\n//SELECT EXISTS ( SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM\n//"m_t_123" WHERE ("m_t_123"."age" < 30) ) ;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"All"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res=session.Query<MyClass>().All(a=>a.Age>0);\nConsole.WriteLine(res);\n//ORM: SELECT COUNT(*),(SELECT COUNT(*) FROM "m_t_123"  WHERE ("m_t_123"."age" > 0) ) FROM "m_t_123"\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Average"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res=session.Query<MyClass>().Average(a=>a.Age);\nConsole.WriteLine(res);\n//ORM: SELECT AVG("m_t_123"."age") FROM "m_t_123";\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Distinct"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Distinct(a => a.Name).ToList();\nres.ForEach(Console.WriteLine);\n//ORM: SELECT DISTINCT "m_t_123"."name" FROM "m_t_123";\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"ElementAt"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().ElementAt(1);\nConsole.WriteLine(JsonConvert.SerializeObject(res));\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//LIMIT 1 OFFSET 1;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"ElementAtOrDefault"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().ElementAtOrDefault(1);\n if(res!=null)Console.WriteLine(JsonConvert.SerializeObject(res));\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//LIMIT 1 OFFSET 1 ;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"First FirstOrDefault"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar ee=session.Query<MyClass>().OrderBy(a => a.Age).First();\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//ORDER BY "m_t_123"."age" LIMIT 1 ;\n\nvar res = session.Query<MyClass>().First();\n Console.WriteLine(JsonConvert.SerializeObject(res));\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123" LIMIT 1 ;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Last LastOrDefault"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Last();\n Console.WriteLine(JsonConvert.SerializeObject(res));\n//ORM: ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//ORDER BY  "m_t_123"."Id" DESC LIMIT 1;\n\nvar res = session.Query<MyClass>().LastOrDefault();\n if(res!=null)Console.WriteLine(JsonConvert.SerializeObject(res));\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//ORDER BY  "m_t_123"."Id" DESC LIMIT 1;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Single SingleOrDefault"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().SingleOrDefault();\n if(res!=null)Console.WriteLine(JsonConvert.SerializeObject(res));\n//SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123" LIMIT 2 ;\n\nvar res = session.Query<MyClass>().Single(a=>a.Age==10);\n Console.WriteLine(JsonConvert.SerializeObject(res));\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE ("m_t_123"."age" = 10) LIMIT 2 ;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Sum"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\n var res = session.Query<MyClass>().Sum(a=>a.Age);\n Console.WriteLine(res);\n//ORM: SELECT Sum("m_t_123"."age") FROM "m_t_123";\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Max"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\n var res = session.Query<MyClass>().Max(a=>a.Age);\n Console.WriteLine(res);\n//ORM: SELECT Max("m_t_123"."age") FROM "m_t_123";\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Min"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\n var res = session.Query<MyClass>().Min(a=>a.Age);\n Console.WriteLine(res);\n//ORM: SELECT Min("m_t_123"."age") FROM "m_t_123";\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Count"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Count(a => a.Age == 20);\n Console.WriteLine(res);\n//SELECT COUNT(*) FROM "m_t_123" WHERE ("m_t_123"."age" = 20);\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Reverse"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Where(a=>a.Age>0).Reverse().ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE ("m_t_123"."age" > 0) ORDER BY "m_t_123"."Id" DESC;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"OrderBy OrderByDescending ThenBy ThenByDescending "}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().OrderBy(a=>a.Age).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//ORDER BY "m_t_123"."age";\n\nvar res = session.Query<MyClass>().OrderByDescending(a=>a.Age).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//ORDER BY "m_t_123"."age" DESC;\n\nvar res = session.Query<MyClass>().OrderBy(a=>a.Age).ThenBy(a=>a.Name).ToList();\nres.ForEach(WriteLineClass);\n// ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n// ORDER BY "m_t_123"."age", "m_t_123"."name";\n\nvar res = session.Query<MyClass>().OrderByDescending(a=>a.Age).ThenByDescending(a=>a.Name).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//ORDER BY "m_t_123"."age" DESC , "m_t_123"."name" DESC;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Limit"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Limit(1,100).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//Limit 100 OFFSET 1;\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Select"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nList<int> res = session.Query<MyClass>().Select(a=>a.Age).ToList();\n//ORM: SELECT "m_t_123"."age" FROM "m_t_123"\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Select as new object"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar  res = session.Query<MyClass>().Select(a=>new {name=a.Name,age=a.Age}).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."name" ,"m_t_123"."age" FROM "m_t_123";\n\nvar  res = session.Query<MyClass>().Select(a=>new {a.Name,a.Age}).ToList();\nres.ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."name" ,"m_t_123"."age" FROM "m_t_123";\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"SelectSql"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nsession.Query<MyClass>().SelectSql<int>(" age*2 ").ForEach(Console.WriteLine);\n//ORM: SELECT age*2 FROM "m_t_123";\n\nsession.Query<MyClass>().SelectSql<string>("Concat(\'name:\',name,\' age:\', age) ").ForEach(Console.WriteLine);\n//ORM: SELECT Concat(\'name:\',name,\' age:\', age) FROM "m_t_123";\n\nsession.Query<MyClass>().SelectSql<string>("Concat(@1,name,\' age:\', age) ",new SqlParam("@1","name: ")).ForEach(Console.WriteLine);\n//ORM: SELECT Concat(@1,name,\' age:\', age) FROM "m_t_123"; params:  @1=\'name: \' \n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"SelectSqlE"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nsession.Query<MyClass>().SelectSqlE(a => $"Concat(\'name:\',{a.Name},\' - age:\',{a.Age})").ToList().ForEach(Console.WriteLine);\n//ORM: SELECT Concat(\'name:\',"m_t_123"."name",\' - age:\',"m_t_123"."age") FROM "m_t_123";\n\nsession.Query<MyClass>().SelectSqlE(a => $"Concat(@22,{a.Name},\' - age:\',{a.Age})",new SqlParam("@22","name: "))\n.ToList().ForEach(Console.WriteLine);\n//ORM: SELECT Concat(@22,"m_t_123"."name",\' - age:\',"m_t_123"."age") FROM "m_t_123"; params:  @22=\'name: \' \n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Delete"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Delete(a=>a.Age==20);\nConsole.WriteLine(res);\n//ORM: DELETE FROM "m_t_123" WHERE ("m_t_123"."age" = 20);\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Update"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().Update(a=>new Dictionary<object, object>\n{\n    {a.Age,50},\n    {a.Name,"Elderly"}\n});\nConsole.WriteLine(res);\n//ORM: UPDATE  "m_t_123" SET  "age" = 50, "name" = @p1   ; params:  @p1=\'Elderly\' \n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"UpdateSql"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nvar res = session.Query<MyClass>().UpdateSql(a=>$"{a.Age}=50, {a.Name}=@1",new SqlParam("@1", "Elderly"));\nConsole.WriteLine(res);\n//ORM: UPDATE  "m_t_123" SET  "age"=50, "name"=@1   ; params:  @1=\'Elderly\'\n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Between"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\nsession.Query<MyClass>().Between(a=>a.DateTime,DateTime.Now.AddDays(-1),DateTime.Now.AddDays(1)).ForEach(WriteLineClass);\n//ORM: SELECT "m_t_123"."Id", "m_t_123"."name", "m_t_123"."age", "m_t_123"."des", "m_t_123"."date" FROM "m_t_123"\n//WHERE "m_t_123"."date" BETWEEN @p1 AND @p2; params:  @p1=6/27/2024 11:27:43 AM  @p2=6/29/2024 11:27:43 AM \n                '})})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"WhereIf WhereIfSql WhereIfIn"}),(0,a.jsx)("div",{children:(0,a.jsx)(r.L8,{code:'\npublic async Task<IActionResult> GetAllDetails(string? line, string? where, Guid group, Guid place,\n     bool consumable, string? format)\n {\n     try\n     {\n         var lineIf = line == null || line == "null" || line == "undefined" || line == Guid.Empty.ToString();\n         using var session = await Configure.SessionAsync;\n         var res = await session.Query<MDetail>()\n             .WhereIf(where != null, a =>\n                 (a.Name != null && a.Name.ToLower().Contains(where.Trim().ToLower())\n                  || (a.PartNumber != null && a.PartNumber.Contains(where.Trim()))))\n             .WhereIf(string.IsNullOrWhiteSpace(format) == false, a => a.Format == format)\n             .WhereIf(place != Guid.Empty, a => a.StoragePlaceId == place)\n             .WhereIf(consumable == true, a => a.IsConsumables == true)\n             .WhereIf(group != Guid.Empty, a => a.GroupId == group)\n             .WhereIfSql(lineIf == false, a => $" {a.Lines}::jsonb ? @111", new SqlParam("@111", line==null?"":"".Trim())) //for Eliminate Exception\n             .OrderBy(s => s.Name)\n             .ToListAsync();\n         return Ok(res);\n     }\n\n     catch (Exception e)\n     {\n         Console.WriteLine(e);\n         throw \n     }\n }\n                '})})]})]})}}}]);
//# sourceMappingURL=5612.8add3d7b.chunk.js.map