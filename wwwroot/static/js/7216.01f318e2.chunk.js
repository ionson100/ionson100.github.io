"use strict";(self.webpackChunkionson100_github_io=self.webpackChunkionson100_github_io||[]).push([[7216],{88956:(e,t,o)=>{o.r(t),o.d(t,{default:()=>D});var n=o(42324);o(32568);const i=new class{constructor(){this.bsrMap=void 0,this.visibleButtons=void 0,this.actionListFeatures=void 0,this.selectRowTable=void 0}};var l=o(65043),r=o(35616),s=(o(14464),o(75200)),d=o(59478),a=o(70579);class c extends r.qk{constructor(e){super(e),this.state={background:e.data.color,validated:!1},o.g.refform=this,this.validate.bind(this),this.getData.bind(this)}handleChangeComplete(e){this.setState({background:e.hex})}validate(){return!0}getData(){return{color:this.state.background}}componentDidMount(){}render(){return(0,a.jsx)("div",{style:{padding:10},children:(0,a.jsx)(d.Xq,{color:this.state.background,onChangeComplete:this.handleChangeComplete.bind(this)})})}}function u(e,t){const o={color:e},n=(0,a.jsx)(c,{data:o}),i=[(0,a.jsx)("button",{className:"bt-bsr","data-mode":2,children:"Save"},2),(0,a.jsx)("button",{className:"bt-bsr","data-mode":-1,"data-focus":1,children:"Cancel"},-1)];return(0,r.fG)({style:{width:"fit-content"},header:(0,a.jsx)("div",{style:{paddingLeft:10},children:null!==t&&void 0!==t?t:"Select Color"}),icon:(0,a.jsx)(s.VSk,{size:20}),body:n,buttons:i})}class h extends r.qk{constructor(){super(...arguments),this.colorDiv=l.createRef(),this.fillDiv=l.createRef()}getData(e){return null}validate(e){return!0}render(){var e,t;return(0,a.jsxs)("div",{style:{padding:20},children:[(0,a.jsx)("button",{ref:this.colorDiv,onClick:()=>{var e;u(null!==(e=this.props.style.colorPolygon)&&void 0!==e?e:"#7ae31c","Color Polygon").then((e=>{"2"===e.mode&&(this.props.style.colorPolygon=e.dataBody.color,this.colorDiv.current.style.backgroundColor=e.dataBody.color,this.props.map.RefreshStyleSettings(),this.props.map.RefreshStyleFeatures())}))},style:{backgroundColor:null!==(e=this.props.style.colorPolygon)&&void 0!==e?e:"#7ae31c",padding:20,color:"white"},children:"Color polygon"}),(0,a.jsx)("button",{ref:this.fillDiv,onClick:()=>{var e;u(null!==(e=this.props.style.fillPolygon)&&void 0!==e?e:"#8fe56d","Fill Polygon").then((e=>{"2"===e.mode&&(this.props.style.fillPolygon=e.dataBody.color,this.fillDiv.current.style.backgroundColor=e.dataBody.color,this.props.map.RefreshStyleSettings(),this.props.map.RefreshStyleFeatures())}))},style:{backgroundColor:null!==(t=this.props.style.fillPolygon)&&void 0!==t?t:"#8fe56d",padding:20,color:"white",marginLeft:10},children:"Fill polygon"})]})}}var v=o(92073);function g(e){setTimeout((()=>{const t=e.GetFeatures(void 0),o=e.FeaturesToJson(t);localStorage.setItem("123-1",o),i.actionListFeatures&&i.actionListFeatures(t)}))}function y(e){return(0,a.jsx)("div",{id:"nav",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.DeleteAllFeatures((()=>{g(e)}))},children:"Delete all features"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.CreateFeature("Point").then((e=>{var t,o;e&&(null===(t=e.feature)||void 0===t||t.set("row",(0,v.A)()),null===(o=e.feature)||void 0===o||o.set("index",(new Date).getTime()))}))},children:"Create Point"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.CreateFeature("Polygon").then((e=>{var t,o;e&&(null===(t=e.feature)||void 0===t||t.set("row",(0,v.A)()),null===(o=e.feature)||void 0===o||o.set("index",(new Date).getTime()))}))},children:"Create Polygon"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.CreateFeature("LineString").then((e=>{var t,o;e&&(null===(t=e.feature)||void 0===t||t.set("row",(0,v.A)()),null===(o=e.feature)||void 0===o||o.set("index",(new Date).getTime()))}))},children:"Create Linestring"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.CreateFeature("Circle").then((e=>{var t,o;e&&(null===(t=e.feature)||void 0===t||t.set("row",(0,v.A)()),null===(o=e.feature)||void 0===o||o.set("index",(new Date).getTime()))}))},children:"Create Circle"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.GoTo([0,0])},children:"Goto 0"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.GoTo([351321.43,5191492.33],12.7)},children:"Goto home"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{console.log("bound",e.GetBound(!0))},children:"GetBound as json"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{console.log("bound",e.GetBound())},children:"GetBound as object"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.Rotation(.2)},children:"Rotation .2"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.Rotation(0)},children:"Rotation 0"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{var t,o;t=e.GetOptions().style,o=e,(0,r.fG)({header:(0,a.jsx)("span",{style:{paddingLeft:10},children:"Color Settings polygon"}),body:(0,a.jsx)(h,{style:t,map:o}),buttons:[(0,a.jsx)("button",{className:"bt-bsr","data-mode":-1,children:"close"})]}).then()},children:"Settings Color"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.Dispose()},children:"Dispose"})})]})})}var p=o(84391),x=o(53180),b=(o(93221),o(60184)),f=o(47196);const j=[];function C(){const e=(0,l.useRef)(null),t=(0,l.useRef)(null),o=(0,l.useRef)(null);(0,l.useEffect)((()=>{i.selectRowTable=e=>{t.current.SelectRowById([e])},i.actionListFeatures=e=>{r(e)},e.current.style.visibility="hidden",i.visibleButtons=(t,o)=>{e.current.style.visibility=t?"visible":"hidden"}}));const n=(e,t)=>{const o=e.get("index"),n=t.get("index");return o>n?1:o===n?0:-1},r=e=>{if(!e||0==e.length)return j.length=0,t.current.Refresh(),void(o.current.style.display="none");o.current.style.display="block",j.length=0,e.sort(n).forEach((e=>{e.getGeometry().getType().toString().includes("Collec")||j.push({id:e.get("row"),onClick:()=>{var t,o;null===(t=i.bsrMap)||void 0===t||t.EndEditFeature(),null===(o=i.bsrMap)||void 0===o||o.SelectFeature(e)},tag:{feature:e,geometry:e.getGeometry().getType().toString()},getView:()=>({b1:(0,a.jsx)("div",{onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(b.uO9,{color:"green",onClick:t=>{var o,n;null===(o=i.bsrMap)||void 0===o||o.EndEditFeature(),null===(n=i.bsrMap)||void 0===n||n.SelectFeature(e),setTimeout((()=>{var t;null===(t=i.bsrMap)||void 0===t||t.StartEditFeature(e)}),100)}})}),b2:(0,a.jsx)("div",{onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(f.Ku6,{color:"green",onClick:()=>{var t;null===(t=i.bsrMap)||void 0===t||t.DeleteFeature(e),g(i.bsrMap)}})}),geometry:e.getGeometry().getType().toString()})})})),t.current.Refresh()};return(0,a.jsxs)("div",{style:{width:"fit-content"},children:[(0,a.jsx)("div",{ref:o,style:{display:"none"},children:(0,a.jsxs)(x.XI,{classNameSelection:"select-row",ref:t,style:{width:300},rowItems:j,useRowSelection:!0,children:[(0,a.jsx)(x.VP,{nameProperty:"b1",style:{width:10}}),(0,a.jsx)(x.VP,{nameProperty:"b2",style:{width:10}}),(0,a.jsx)(x.VP,{nameProperty:"geometry",style:{width:170},children:"Geometry"})]})}),(0,a.jsxs)("div",{ref:e,children:[(0,a.jsx)("button",{onClick:()=>{var e;null===(e=i.bsrMap)||void 0===e||e.Undo()},className:"bt-bsr",children:" undo"}),(0,a.jsx)("button",{onClick:()=>{var e;null===(e=i.bsrMap)||void 0===e||e.CancelCreate()},className:"bt-bsr",children:" Cancel create"})]})]})}var m=o(87193);function k(){const e=document.createElement("div");e.className="proxy-list";const t=(0,p.createRoot)(e);return document.body.appendChild(e),t.render((0,a.jsx)(C,{})),e}class F extends m.A{constructor(e){const t=e||{};super({element:k(),target:t.target})}}const w=new F({});o(26559);var S=o(83002);const E={widthCircle:2,colorPolygon:"#52a309",fillPolygon:"#8fe56d",radiusPoint:10,radiusPointSelect:10};function D(){const e=(0,l.useRef)(null);(0,l.useEffect)((()=>{var t,o;const n=e.current,l=document.getElementById("content");i.bsrMap=e.current,l&&(l.style.paddingLeft="0px"),setTimeout((()=>{var t;null===(t=e.current)||void 0===t||t.GetMap().addControl(w)}));const s=null===(t=e.current)||void 0===t?void 0:t.AddEventStateCreatingFeature(((e,t)=>{i.visibleButtons&&i.visibleButtons(e,i.bsrMap)}));null===(o=e.current)||void 0===o||o.GetVectorSource().clear();const d=localStorage.getItem("123-1");if(d)try{var c;null===(c=e.current)||void 0===c||c.AddFeature(d)}catch(u){}return setTimeout((()=>{i.actionListFeatures&&i.actionListFeatures(i.bsrMap.GetFeatures(void 0)),(0,r.fG)({className:"main-dialog-alert",modal:!1,timeOut:2e3,classNameBody:"m-body-alert",body:(0,a.jsxs)("div",{className:"body-test",children:[(0,a.jsx)(S.uGG,{size:50,color:"green"}),(0,a.jsx)("div",{style:{paddingLeft:20,fontSize:25},children:"Use the context menu option"})]})}).then()})),()=>{l.style.paddingLeft="30px",n.RemoveEventStateCreatingFeature(s)}}));const t={style:E,useSynchronizationUrl:!0,useDrawBox:!0,onShowContextMenu:(e,t,o)=>{setTimeout((()=>{e.IsCreate||(t?(0,n.s)(o,function(e,t){return(0,a.jsx)("div",{id:"nav",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{e.DeleteFeature(t),g(e)},children:"Delete Feature"})}),(0,a.jsx)("li",{style:{display:e.IsEdit?"none":"block"},children:(0,a.jsx)("div",{onClick:()=>{e.StartEditFeature(t)},children:"Edit Feature"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{style:{display:e.IsEdit?"block":"none"},onClick:()=>{e.EndEditFeature()},children:"End Edit"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{alert(e.GetCenterFeature(t))},children:"Center Feature"})}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{onClick:()=>{alert(e.GetCoordinateFeature(t))},children:"Coordinate Feature"})})]})})}(e,t)):(0,n.s)(o,y(e)))}))},onClick:(e,t,o)=>{if(console.log(t),!t||e.IsCreate)return;e.EndEditFeature(),e.SelectFeature(t);const n=t.get("row");i.selectRowTable(n)},onDrawEnd:(e,t)=>{console.log("onDrawEnd:",t),g(e)},onModifyEnd:(e,t)=>{console.log("onModifyEnd",t),g(e)},onDrawBoxEnd:(e,t,o)=>{console.log("onDrawBoxEnd",t,o),e.SelectFeatures(t)},onDragEnd:(e,t)=>{console.log("onDragEnd",t),g(e)}};return(0,a.jsx)(n.m,{id:"12-bsr=map",ref:e,option:t,style:{width:"100%",height:"100%"}})}},26559:()=>{}}]);
//# sourceMappingURL=7216.01f318e2.chunk.js.map